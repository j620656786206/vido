# =============================================================================
# Vido Environment Configuration
# =============================================================================
# This file documents all environment variables supported by Vido.
# Copy this file to .env and modify values as needed.
#
# Priority: Environment variables take precedence over defaults.
# The application logs which source each value came from on startup.
# =============================================================================

# =============================================================================
# Server Configuration
# =============================================================================

# Application server port
# VIDO_PORT takes precedence over PORT (backward compatibility)
# Default: 8080
VIDO_PORT=8080
# PORT=8080  # Deprecated: use VIDO_PORT instead

# Environment mode: development, staging, production
# Default: development
ENV=development

# Log level: debug, info, warn, error
# Default: info
VIDO_LOG_LEVEL=info

# CORS allowed origins (comma-separated)
# Use * to allow all origins (development only)
# Default: *
VIDO_CORS_ORIGINS=http://localhost:3000,http://localhost:4200,http://localhost:5173

# =============================================================================
# Path Configuration
# =============================================================================

# Data directory for database, cache, and application data
# In Docker, this maps to the /vido-data volume
# Default: /vido-data
VIDO_DATA_DIR=/vido-data

# Media library directories (comma-separated)
# These directories will be scanned for media files
# Default: /media
VIDO_MEDIA_DIRS=/media,/movies,/tv

# =============================================================================
# Database Configuration
# =============================================================================

# Path to the SQLite database file
# If relative, will be created in current directory
# In Docker: use /vido-data/vido.db
# Default: ./data/vido.db
DB_PATH=./data/vido.db

# Enable WAL mode for better concurrent performance
# Default: true
DB_WAL_ENABLED=true

# WAL sync mode: OFF, NORMAL, FULL
# NORMAL provides good balance of safety and performance
# Default: NORMAL
DB_WAL_SYNC_MODE=NORMAL

# WAL checkpoint threshold (number of frames before auto-checkpoint)
# Default: 1000
DB_WAL_CHECKPOINT=1000

# Maximum number of open database connections
# Default: 25
DB_MAX_OPEN_CONNS=25

# Maximum number of idle database connections
# Default: 5
DB_MAX_IDLE_CONNS=5

# Maximum lifetime of a database connection (duration string: 5m, 1h, etc.)
# Default: 5m
DB_CONN_MAX_LIFETIME=5m

# Maximum idle time of a database connection (duration string)
# Default: 1m
DB_CONN_MAX_IDLE_TIME=1m

# Busy timeout when database is locked (duration string)
# Default: 5s
DB_BUSY_TIMEOUT=5s

# Cache size in KB (negative value = KB)
# Default: -64000 (64MB)
DB_CACHE_SIZE=-64000

# =============================================================================
# API Keys (Optional)
# =============================================================================
# These keys are optional. The application will work without them,
# but some features will be disabled.

# TMDb API key for fetching movie and TV show metadata
# Get your API key from https://www.themoviedb.org/settings/api
# Feature: Media search, metadata retrieval, poster images
TMDB_API_KEY=

# Google Gemini API key for AI-powered parsing
# Get your API key from https://makersuite.google.com/app/apikey
# Feature: AI filename parsing, smart search suggestions
GEMINI_API_KEY=

# Encryption key for encrypting sensitive data (AES-256)
# Generate a secure 32+ character key
# Feature: Secure storage of API keys and secrets
ENCRYPTION_KEY=

# =============================================================================
# TMDb Configuration
# =============================================================================

# Default language for TMDb metadata (ISO 639-1 format)
# zh-TW for Traditional Chinese, zh-CN for Simplified Chinese, en-US for English
# Default: zh-TW
TMDB_DEFAULT_LANGUAGE=zh-TW

# Language fallback chain for TMDb metadata (comma-separated, ISO 639-1 format)
# The system will try each language in order until it finds localized content
# Default: zh-TW,zh-CN,en
TMDB_FALLBACK_LANGUAGES=zh-TW,zh-CN,en

# Cache TTL for TMDb API responses (in hours)
# Default: 24
TMDB_CACHE_TTL_HOURS=24

# =============================================================================
# Docker Configuration (for docker-compose.yml)
# =============================================================================

# Port for the web interface (nginx)
# Access Vido at http://localhost:WEB_PORT
WEB_PORT=8080

# Port for direct API access (useful for debugging)
# Access API at http://localhost:API_PORT
API_PORT=8081

# Path to your media library
# This folder will be mounted read-only in the container
# Example: /volume1/media (Synology), /mnt/media (Linux)
MEDIA_PATH=./media

# =============================================================================
# E2E Testing Configuration (Playwright)
# =============================================================================

# Test environment: local, staging, production
TEST_ENV=local

# Base URL for E2E tests (frontend)
BASE_URL=http://localhost:4200

# API URL for E2E tests (backend)
API_URL=http://localhost:8080/api/v1
